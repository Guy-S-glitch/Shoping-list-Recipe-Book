import{a as T}from"./chunk-PFK6XVEQ.js";import{$ as L,A as s,B as n,C as f,D as x,E as h,F as p,L as d,N as w,R as y,Z as M,_ as c,aa as F,ba as I,da as C,fa as E,ha as V,ka as A,r as b,sa as N,t as u,u as g,w as a,x as v,y as S,ya as G,z as l,za as D}from"./chunk-NGME7X53.js";function k(t,r){t&1&&(s(0,"div",5),f(1,"app-loading"),n())}function O(t,r){if(t&1){let i=x();s(0,"app-alert",6),h("close",function(){u(i);let e=p();return g(e.handleError())}),n()}if(t&2){let i=p();l("message",i.errorMessage)}}function j(t,r){if(t&1){let i=x();s(0,"form",7),h("ngSubmit",function(){u(i);let e=p();return g(e.onSubmit())}),s(1,"div",8)(2,"label",9),d(3,"email"),n(),f(4,"input",10),n(),s(5,"div",8)(6,"label",11),d(7,"password"),n(),f(8,"input",12),n(),s(9,"div")(10,"button",13),d(11),n(),d(12," | "),s(13,"button",14),h("click",function(){u(i);let e=p();return g(e.switchMode())}),d(14),n()()()}if(t&2){let i=p();l("formGroup",i.loginForm),a(10),l("disabled",i.loginForm.invalid),a(),w(" ",i.isLoginMode?"Login":"Sign up"," "),a(3),w(" Switch to ",i.isLoginMode?"Sign up":"Login"," ")}}var K=(()=>{let r=class r{constructor(o,e){this.authService=o,this.router=e,this.isLoginMode=!0,this.isLoading=!1,this.errorMessage=null}switchMode(){this.isLoginMode=!this.isLoginMode}ngOnInit(){this.initForm()}onSubmit(){if(this.loginForm.invalid)return;let o;this.isLoading=!0;let e=this.loginForm.value.email,m=this.loginForm.value.password;this.isLoginMode?o=this.authService.signIn(e,m):o=this.authService.signUp(e,m),o.subscribe(_=>{console.log(_),this.isLoading=!1,this.errorMessage=null,this.router.navigate(["./recipes"])},_=>{this.errorMessage=_,this.isLoading=!1})}initForm(){this.loginForm=new I({email:new C(null,[c.required,c.email]),password:new C(null,[c.minLength(6),c.required])})}handleError(){this.errorMessage=null}};r.\u0275fac=function(e){return new(e||r)(v(T),v(N))},r.\u0275cmp=b({type:r,selectors:[["app-auth"]],decls:5,vars:3,consts:[[1,"row"],[1,"col-xs-8","col-xs-offset-2","col-md-6","col-md-offset-3"],["style","text-align: center",4,"ngIf"],[3,"message","close",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[2,"text-align","center"],[3,"close","message"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["type","email","name","email","id","email","formControlName","email",1,"form-control"],["for","password"],["type","password","name","password","id","password","formControlName","password",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,m){e&1&&(s(0,"div",0)(1,"div",1),S(2,k,2,0,"div",2)(3,O,1,1,"app-alert",3)(4,j,15,4,"form",4),n()()),e&2&&(a(2),l("ngIf",m.isLoading),a(),l("ngIf",m.errorMessage),a(),l("ngIf",!m.isLoading))},dependencies:[y,E,M,L,F,V,A,G,D],styles:["input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:2px solid red}"]});let t=r;return t})();export{K as a};
