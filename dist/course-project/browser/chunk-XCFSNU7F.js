import{a as C,b as de}from"./chunk-BMUOC6CD.js";import"./chunk-AMA66JBV.js";import{a as le}from"./chunk-PFK6XVEQ.js";import{$ as Q,A as p,Aa as fe,B as o,C as m,D as j,E as f,F as $,G as T,K as z,L as c,M as D,N as H,O as X,P as B,Q as E,W as J,Z as K,_ as v,aa as W,ba as M,da as S,fa as Y,ga as Z,h as P,ha as ee,ia as te,ja as ie,ka as re,l as G,na as ne,o as k,oa as oe,p as q,pa as pe,q as b,qa as F,r as d,ra as ce,s as U,sa as R,t as I,ta as me,u as _,ua as ae,v as x,w as a,wa as se,x as u,xa as ue,y as w,z as s}from"./chunk-NGME7X53.js";function xe(i,e){if(i&1&&(p(0,"li",10),c(1),o()),i&2){let g=e.$implicit;a(),X(" ",g.name," - ",g.amount," ")}}var ge=(()=>{let e=class e{constructor(r,t,n){this.recipeService=r,this.route=t,this.router=n}ngOnInit(){this.route.params.subscribe(r=>{this.id=+r.id,this.recipe=this.recipeService.getRecipe(this.id)})}onAddToShoppingList(){this.recipeService.addIngredientsToShoppingList(this.recipe.ingredients)}deleteRecipe(){this.recipeService.deleteRecipe(this.id),this.router.navigate(["../"],{relativeTo:this.route})}onEditRecipe(){this.router.navigate(["edit"],{relativeTo:this.route})}};e.\u0275fac=function(t){return new(t||e)(u(C),u(F),u(R))},e.\u0275cmp=d({type:e,selectors:[["app-recipe-detail"]],decls:30,vars:5,consts:[[1,"row"],[1,"col-xs-12"],[1,"img-responsive",2,"max-height","300px",3,"src","alt"],["appDropdown","",1,"btn-group"],["type","button",1,"btn","btn-primary","dropdown-toggle"],[1,"caret"],[1,"dropdown-menu"],[2,"cursor","pointer",3,"click"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"]],template:function(t,n){t&1&&(p(0,"div",0)(1,"div",1),m(2,"img",2),o()(),p(3,"div",0)(4,"div",1)(5,"h1"),c(6),o()()(),p(7,"div",0)(8,"div",1)(9,"div",3)(10,"button",4),c(11," Manage Recipe "),m(12,"span",5),o(),p(13,"ul",6)(14,"li")(15,"a",7),f("click",function(){return n.onAddToShoppingList()}),c(16,"To Shopping List"),o()(),p(17,"li")(18,"a",7),f("click",function(){return n.onEditRecipe()}),c(19,"Edit Recipe"),o()(),p(20,"li")(21,"a",7),f("click",function(){return n.deleteRecipe()}),c(22,"Delete Recipe"),o()()()()()(),p(23,"div",0)(24,"div",1),c(25),o()(),p(26,"div",0)(27,"div",1)(28,"ul",8),w(29,xe,2,2,"li",9),o()()()),t&2&&(a(2),T("alt",n.recipe.name),s("src",n.recipe.imagePath,x),a(4),D(n.recipe.name),a(19),H(" ",n.recipe.description," "),a(4),s("ngForOf",n.recipe.ingredients))},dependencies:[E,ue]});let i=e;return i})();function we(i,e){if(i&1){let g=j();p(0,"div",17)(1,"div",18),m(2,"input",19),o(),p(3,"div",20),m(4,"input",21),o(),p(5,"div",20)(6,"button",5),f("click",function(){let t=I(g).index,n=$();return _(n.onDeleteIngredient(t))}),c(7,"X"),o()()()}if(i&2){let g=e.index;s("formGroupName",g)}}var O=(()=>{let e=class e{get recipeControls(){return this.recipeForm.get("ingredients").controls}constructor(r,t,n){this.route=r,this.recipeService=t,this.router=n,this.editMode=!1}ngOnInit(){this.route.params.subscribe(r=>{this.id=+r.id,this.editMode=r.id!=null,this.initForm()})}onSubmit(){this.editMode?this.recipeService.updateRecipe(this.id,this.recipeForm.value):this.recipeService.addRecipe(this.recipeForm.value),this.onCancel()}onAddIngredient(){this.recipeForm.get("ingredients").push(new M({name:new S(null,v.required),amount:new S(null,[v.required,v.pattern(/^[1-9]+[0-9]*$/)])}))}onDeleteIngredient(r){this.recipeForm.get("ingredients").removeAt(r)}onCancel(){this.router.navigate(["../"],{relativeTo:this.route})}initForm(){let r="",t="",n="",l=new ne([]);if(this.editMode){let h=this.recipeService.getRecipe(this.id);if(r=h.name,t=h.imagePath,n=h.description,h.ingredients)for(let V of h.ingredients)l.push(new M({name:new S(V.name,v.required),amount:new S(V.amount,[v.required,v.pattern(/^[1-9]+[0-9]*$/)])}))}this.recipeForm=new M({name:new S(r,v.required),imagePath:new S(t,v.required),description:new S(n,v.required),ingredients:l})}};e.\u0275fac=function(t){return new(t||e)(u(F),u(C),u(R))},e.\u0275cmp=d({type:e,selectors:[["app-recipe-edit"]],decls:39,vars:4,consts:[["imagePath",""],[1,"row"],[1,"col-xs-12"],[3,"ngSubmit","formGroup"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button",1,"btn","btn-danger",3,"click"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],["for","imagePath"],["type","text","id","imagePath","formControlName","imagePath",1,"form-control"],[1,"img-responsive",3,"src"],["for","description"],["type","text","id","description","formControlName","description","rows","6",1,"form-control"],["formArrayName","ingredients",1,"col-xs-12"],["class","row","style","margin-top: 10px;",3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-success",3,"click"],[1,"row",2,"margin-top","10px",3,"formGroupName"],[1,"col-xs-8"],["type","text","formControlName","name",1,"form-control"],[1,"col-xs-2"],["type","number","formControlName","amount",1,"form-control"]],template:function(t,n){if(t&1){let l=j();p(0,"div",1)(1,"div",2)(2,"form",3),f("ngSubmit",function(){return I(l),_(n.onSubmit())}),p(3,"div",1)(4,"div",2)(5,"button",4),c(6,"Save"),o(),p(7,"button",5),f("click",function(){return I(l),_(n.onCancel())}),c(8,"Cancel"),o()()(),p(9,"div",1)(10,"div",2)(11,"div",6)(12,"label",7),c(13,"Name"),o(),m(14,"input",8),o()()(),p(15,"div",1)(16,"div",2)(17,"div",6)(18,"label",9),c(19,"Image URL"),o(),m(20,"input",10,0),o()()(),p(22,"div",1)(23,"div",2),m(24,"img",11),o()(),p(25,"div",1)(26,"div",2)(27,"div",6)(28,"label",12),c(29,"Description"),o(),m(30,"textarea",13),o()()(),p(31,"div",1)(32,"div",14),w(33,we,8,1,"div",15),m(34,"hr"),p(35,"div",1)(36,"div",2)(37,"button",16),f("click",function(){return I(l),_(n.onAddIngredient())}),c(38,"Add Ingredient"),o()()()()()()()()}if(t&2){let l=z(21);a(2),s("formGroup",n.recipeForm),a(3),s("disabled",!n.recipeForm.valid),a(19),s("src",l.value,x),a(9),s("ngForOf",n.recipeControls)}},dependencies:[E,Y,K,Z,Q,W,ee,re,te,ie],styles:["input.ng-invalid.ng-touched[_ngcontent-%COMP%], textarea.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}"]});let i=e;return i})();var Ee=i=>[i],he=(()=>{let e=class e{ngOnInit(){}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d({type:e,selectors:[["app-recipe-item"]],inputs:{recipe:"recipe",index:"index"},decls:8,vars:7,consts:[["routerLinkActive","active",1,"list-group-item","clearfix",2,"cursor","pointer",3,"routerLink"],[1,"pull-left"],[1,"list-group-item-heading"],[1,"list-group-item-text"],[1,"pull-right"],[1,"img-responsive",2,"max-height","50px",3,"src","alt"]],template:function(t,n){t&1&&(p(0,"a",0)(1,"div",1)(2,"h4",2),c(3),o(),p(4,"p",3),c(5),o()(),p(6,"span",4),m(7,"img",5),o()()),t&2&&(s("routerLink",B(5,Ee,n.index)),a(3),D(n.recipe.name),a(2),D(n.recipe.description),a(2),T("alt",n.recipe.name),s("src",n.recipe.imagePath,x))},dependencies:[me,ae]});let i=e;return i})();function Ie(i,e){if(i&1&&m(0,"app-recipe-item",4),i&2){let g=e.$implicit,r=e.index;s("recipe",g)("index",r)}}var Se=(()=>{let e=class e{constructor(r,t,n){this.recipeService=r,this.router=t,this.route=n}ngOnInit(){this.subscription=this.recipeService.recipesChanged.subscribe(r=>{this.recipes=r}),this.recipes=this.recipeService.getRecipes()}onNewRecipe(){this.router.navigate(["new"],{relativeTo:this.route})}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(t){return new(t||e)(u(C),u(R),u(F))},e.\u0275cmp=d({type:e,selectors:[["app-recipe-list"]],decls:8,vars:1,consts:[[1,"row"],[1,"col-xs-12"],[1,"btn","btn-success",3,"click"],[3,"recipe","index",4,"ngFor","ngForOf"],[3,"recipe","index"]],template:function(t,n){t&1&&(p(0,"div",0)(1,"div",1)(2,"button",2),f("click",function(){return n.onNewRecipe()}),c(3,"New Recipe"),o()()(),m(4,"hr"),p(5,"div",0)(6,"div",1),w(7,Ie,1,2,"app-recipe-item",3),o()()),t&2&&(a(7),s("ngForOf",n.recipes))},dependencies:[E,he]});let i=e;return i})();var Re=(()=>{let e=class e{constructor(){}ngOnInit(){}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d({type:e,selectors:[["app-recipe-start"]],decls:2,vars:0,template:function(t,n){t&1&&(p(0,"h3"),c(1,"Please select a Recipe!"),o())}});let i=e;return i})();var Ce=(()=>{let e=class e{constructor(){}ngOnInit(){}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d({type:e,selectors:[["app-recipes"]],decls:5,vars:0,consts:[[1,"row"],[1,"col-md-5"],[1,"col-md-7"]],template:function(t,n){t&1&&(p(0,"div",0)(1,"div",1),m(2,"app-recipe-list"),o(),p(3,"div",2),m(4,"router-outlet"),o()())},dependencies:[ce,Se]});let i=e;return i})();var ye=(()=>{let e=class e{canActivate(r,t){return this.authService.user.pipe(G(1),P(n=>n?!0:this.router.createUrlTree(["/auth"])))}constructor(r,t){this.authService=r,this.router=t}};e.\u0275fac=function(t){return new(t||e)(b(le),b(R))},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var L=(()=>{let e=class e{constructor(r,t){this.dataStorageService=r,this.recipeService=t}resolve(r,t){return this.recipeService.getRecipes().length===0?this.dataStorageService.fetchData():this.recipeService.getRecipes()}};e.\u0275fac=function(t){return new(t||e)(b(de),b(C))},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var De=[{path:"",component:Ce,canActivate:[ye],children:[{path:"",component:Re},{path:"new",component:O},{path:":id",component:ge,resolve:[L]},{path:":id/edit",component:O,resolve:[L]}]}],be=se.forChild(De);var dt=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=U({type:e}),e.\u0275inj=q({imports:[fe,be,oe,pe,J]});let i=e;return i})();export{dt as RecipesModule};
